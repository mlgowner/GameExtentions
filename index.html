<!DOCTYPE html>
<html lang="ru">
<head>
    <title>–ú–æ–¥—ã –¥–ª—è Roblox</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            color: #333;
            text-align: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }
        h1 {
            font-size: 2.5em;
            color: #5f9ea0;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .login-form, .profile, .mod-buttons {
            max-width: 400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
        }
        button {
            background: #b2f2bb;
            color: #333;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, background 0.3s;
            margin: 5px 0;
        }
        button:hover {
            background: #98e4a3;
            transform: scale(1.05);
        }
        button:active {
            transform: scale(0.95);
        }
        .mod-buttons, .profile {
            display: none;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>–ú–æ–¥—ã –¥–ª—è Roblox</h1>
    <div class="login-form" id="loginForm">
        <input type="text" id="login" placeholder="–õ–æ–≥–∏–Ω" />
        <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" />
        <button onclick="login()">–í—Ö–æ–¥</button>
    </div>
    <div class="profile" id="profile">
        <h2>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
        <div id="stats"></div>
        <button onclick="refreshStats()">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
        <button onclick="logout()">–í—ã–π—Ç–∏</button>
    </div>
    <div class="mod-buttons" id="modButtons">
        <button onclick="downloadMod('minecraft_mod.exe')">üåø NightmareCraft Mod</button>
        <button onclick="downloadMod('extension1.exe')">üçÉ Ext Mod 1</button>
        <button onclick="downloadMod('extension2.exe')">üå± Ext Mod 2</button>
    </div>
    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        let isAuthenticated = !!sessionStorage.getItem('authToken');

        function showSection(sectionId) {
            document.querySelectorAll('.login-form, .profile, .mod-buttons').forEach(el => el.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
        }

        function login() {
            const login = document.getElementById('login').value;
            const password = document.getElementById('password').value;
            if (login && password) {
                tg.sendData(JSON.stringify({ action: "login", login, password }));
                tg.onEvent('web_app_data', (data) => {
                    const response = data.data;
                    if (response.includes("–¢–≤–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")) {
                        sessionStorage.setItem('authToken', 'true');
                        isAuthenticated = true;
                        showSection('profile');
                        showSection('modButtons');
                        document.getElementById('stats').innerHTML = response;
                    } else {
                        alert("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å!");
                    }
                });
            } else {
                alert("–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å!");
            }
        }

        function logout() {
            sessionStorage.removeItem('authToken');
            isAuthenticated = false;
            showSection('loginForm');
        }

        function refreshStats() {
            tg.sendData(JSON.stringify({ action: "stats" }));
            tg.onEvent('web_app_data', (data) => {
                document.getElementById('stats').innerHTML = data.data;
            });
        }

        function downloadMod(modName) {
            if (isAuthenticated) {
                tg.sendData(JSON.stringify({ action: "download", mod: modName }));
                // –ó–∞–º–µ–Ω–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL —Ç–≤–æ–∏—Ö .exe —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä. GitHub Releases)
                window.location.href = `https://—Ç–≤–æ–π—Å–µ—Ä–≤–µ—Ä.com/exe/${modName}`; // –ù–∞—Å—Ç—Ä–æ–π —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä
            } else {
                alert("–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ!");
            }
        }

        if (isAuthenticated) {
            showSection('profile');
            showSection('modButtons');
            refreshStats();
        } else {
            showSection('loginForm');
        }
    </script>
</body>
</html>
