<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mods Search App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F5;
            color: #1C2526;
            padding: 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        h2 {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1C2526;
        }
        #cabinet {
            background-color: #FFFFFF;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }
        #cabinet p {
            margin: 5px 0;
            font-size: 1em;
            color: #6B7280;
        }
        #search {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }
        input, select {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid #D1D5DB;
            border-radius: 8px;
            font-size: 1em;
            background-color: #FFFFFF;
            color: #1C2526;
            transition: border-color 0.3s ease;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #1C2526;
            box-shadow: 0 0 5px rgba(28, 37, 38, 0.2);
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #1C2526;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #374151;
        }
        #results {
            list-style-type: none;
            padding: 0;
            width: 100%;
            max-width: 400px;
        }
        .mod-item {
            background-color: #FFFFFF;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .mod-item h3 {
            margin: 0 0 10px;
            font-size: 1.2em;
            color: #1C2526;
        }
        .mod-item p {
            margin: 0 0 10px;
            font-size: 0.9em;
            color: #6B7280;
        }
        .mod-item a {
            color: #1C2526;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        .mod-item a:hover {
            color: #374151;
        }
    </style>
</head>
<body>
    <div id="cabinet">
        <h2>üñ• –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
        <p id="user-id"></p>
        <p id="user-name"></p>
    </div>
    <div id="search">
        <h2>üîç –ü–æ–∏—Å–∫ –º–æ–¥–æ–≤ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π</h2>
        <input type="text" id="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–∞ –∏–ª–∏ –∏–≥—Ä—ã">
        <select id="game-select">
            <option value="minecraft">Minecraft</option>
            <option value="roblox">Roblox Extensions</option>
            <option value="other">–î—Ä—É–≥–∏–µ –∏–≥—Ä—ã</option>
        </select>
        <button onclick="searchMods()">–ü–æ–∏—Å–∫</button>
    </div>
    <ul id="results"></ul>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();

        // –ü–æ–ª—É—á–µ–Ω–∏–µ user_id –∏ –∏–º–µ–Ω–∏ –æ—Ç Telegram
        const user = tg.initDataUnsafe.user;
        document.getElementById('user-id').textContent = `üÜî –í–∞—à ID: ${user.id}`;
        document.getElementById('user-name').textContent = `üë§ –ò–º—è: ${user.first_name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}`;

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –º–æ–¥–æ–≤
        async function searchMods() {
            const query = document.getElementById('search-input').value;
            const game = document.getElementById('game-select').value;
            const resultsList = document.getElementById('results');
            resultsList.innerHTML = '';

            if (game === 'minecraft') {
                // –ü–æ–∏—Å–∫ –º–æ–¥–æ–≤ –¥–ª—è Minecraft —á–µ—Ä–µ–∑ Modrinth API
                try {
                    const response = await fetch(`https://api.modrinth.com/v2/search?query=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    data.hits.forEach(mod => {
                        const li = document.createElement('li');
                        li.className = 'mod-item';
                        li.innerHTML = `
                            <h3>${mod.title}</h3>
                            <p>${mod.description}</p>
                            <a href="${mod.project_url}" target="_blank">–°–∫–∞—á–∞—Ç—å</a>
                        `;
                        resultsList.appendChild(li);
                    });
                } catch (error) {
                    resultsList.innerHTML = '<li>‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –º–æ–¥–æ–≤.</li>';
                }
            } else if (game === 'roblox') {
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –¥–ª—è Roblox
                const mockExtensions = [
                    { name: 'Roact', desc: '–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è UI –≤ Roblox', url: 'https://roact.roblox.com' },
                    { name: 'Rodux', desc: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–ª—è Roblox', url: 'https://rodux.roblox.com' }
                ];
                mockExtensions.forEach(ext => {
                    if (ext.name.toLowerCase().includes(query.toLowerCase())) {
                        const li = document.createElement('li');
                        li.className = 'mod-item';
                        li.innerHTML = `
                            <h3>${ext.name}</h3>
                            <p>${ext.desc}</p>
                            <a href="${ext.url}" target="_blank">–°–∫–∞—á–∞—Ç—å</a>
                        `;
                        resultsList.appendChild(li);
                    }
                });
                if (resultsList.innerHTML === '') {
                    resultsList.innerHTML = '<li>‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π.</li>';
                }
            } else {
                resultsList.innerHTML = '<li>üîç –ü–æ–∏—Å–∫ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∏–≥—Ä –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.</li>';
            }
        }
    </script>
</body>
</html>
