<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mods Search App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1E3A8A, #4A5568);
            color: #E5E7EB;
            padding: 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        h2 {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #F7FAFC;
            text-align: center;
        }
        #cabinet, #search, .mod-item {
            background-color: #2D3748;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
            transition: transform 0.2s ease;
        }
        #cabinet:hover, #search:hover, .mod-item:hover {
            transform: translateY(-2px);
        }
        #cabinet p {
            margin: 5px 0;
            font-size: 1em;
            color: #CBD5E0;
        }
        #search {
            margin-bottom: 20px;
        }
        input, select {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid #4A5568;
            border-radius: 8px;
            font-size: 1em;
            background-color: #4A5568;
            color: #E5E7EB;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #48BB78;
            box-shadow: 0 0 8px rgba(72, 187, 120, 0.5);
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #48BB78;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        button:hover {
            background-color: #38A169;
            transform: scale(1.02);
        }
        #results {
            list-style-type: none;
            padding: 0;
            width: 100%;
            max-width: 400px;
        }
        .mod-item {
            margin-bottom: 15px;
        }
        .mod-item h3 {
            margin: 0 0 10px;
            font-size: 1.2em;
            color: #F7FAFC;
            text-align: center;
        }
        .mod-item p {
            margin: 0 0 5px;
            font-size: 0.9em;
            color: #CBD5E0;
            text-align: center;
        }
        .download-container {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }
        .mod-item button.download-btn {
            padding: 10px 20px;
            background-color: #48BB78;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .mod-item button.download-btn:hover {
            background-color: #38A169;
            transform: scale(1.05);
        }
        .mod-item a {
            color: #48BB78;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            display: block;
            text-align: center;
            margin-top: 10px;
        }
        .mod-item a:hover {
            color: #38A169;
        }
        @media (max-width: 480px) {
            #cabinet, #search, .mod-item {
                max-width: 100%;
                padding: 15px;
            }
            h2 {
                font-size: 1.3em;
            }
            .mod-item button.download-btn {
                padding: 8px 16px;
            }
        }
    </style>
</head>
<body>
    <div id="cabinet">
        <h2>üñ• –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
        <p id="user-id"></p>
        <p id="user-name"></p>
    </div>
    <div id="search">
        <h2>üîç –ü–æ–∏—Å–∫ –º–æ–¥–æ–≤ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π</h2>
        <input type="text" id="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–∞ –∏–ª–∏ –∏–≥—Ä—ã">
        <select id="game-select">
            <option value="minecraft">Minecraft</option>
            <option value="roblox">Roblox Extensions</option>
            <option value="other">–î—Ä—É–≥–∏–µ –∏–≥—Ä—ã</option>
        </select>
        <button onclick="searchMods()">–ü–æ–∏—Å–∫</button>
    </div>
    <ul id="results"></ul>

    <script>
        const tg = window.Telegram.WebApp;
        if (!tg) {
            alert('–û—à–∏–±–∫–∞: Telegram Web App API –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.');
        }
        tg.ready();

        // –ü–æ–ª—É—á–µ–Ω–∏–µ user_id –∏ –∏–º–µ–Ω–∏ –æ—Ç Telegram
        const user = tg.initDataUnsafe.user;
        document.getElementById('user-id').textContent = `üÜî –í–∞—à ID: ${user.id}`;
        document.getElementById('user-name').textContent = `üë§ –ò–º—è: ${user.first_name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}`;

        // –ú–∞—Å—Å–∏–≤—ã –¥–ª—è —à—É–º–∞
        const facts = [
            "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: Minecraft –±—ã–ª —Å–æ–∑–¥–∞–Ω –ú–∞—Ä–∫—É—Å–æ–º –ü–µ—Ä—Å—Å–æ–Ω–æ–º –≤—Å–µ–≥–æ –∑–∞ –Ω–µ–¥–µ–ª—é!",
            "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: Roblox –∏–º–µ–µ—Ç –±–æ–ª–µ–µ 70 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.",
            "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –º–æ–¥ –¥–ª—è Minecraft - OptiFine - —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.",
            "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: –í Roblox —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ –±–æ–ª–µ–µ $1 –º–∏–ª–ª–∏–∞—Ä–¥–∞ –≤ 2023 –≥–æ–¥—É.",
            "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: –ü–µ—Ä–≤—ã–π –º–æ–¥ –¥–ª—è Minecraft –ø–æ—è–≤–∏–ª—Å—è –≤ 2010 –≥–æ–¥—É."
        ];

        function getRandomFact() {
            return facts[Math.floor(Math.random() * facts.length)];
        }

        function getRandomOnline() {
            return Math.floor(Math.random() * 5000) + 100; // 100-5100 –æ–Ω–ª–∞–π–Ω
        }

        function getRandomRating() {
            return (Math.random() * 1 + 4).toFixed(1) + '/5'; // 4.0-5.0
        }

        function getRandomReviews() {
            return Math.floor(Math.random() * 1000) + 50; // 50-1050 –æ—Ç–∑—ã–≤–æ–≤
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –º–æ–¥–æ–≤
        async function searchMods() {
            const query = document.getElementById('search-input').value.toLowerCase();
            const game = document.getElementById('game-select').value;
            const resultsList = document.getElementById('results');
            resultsList.innerHTML = '';

            if (game === 'minecraft') {
                // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–¥ NightmareCraft
                const nightmareLi = document.createElement('li');
                nightmareLi.className = 'mod-item';
                nightmareLi.innerHTML = `
                    <h3>NightmareCraft</h3>
                    <p>–û–ø–∏—Å–∞–Ω–∏–µ: –£–∂–∞—Å–Ω—ã–π –º–æ–¥ –¥–ª—è Minecraft, –¥–æ–±–∞–≤–ª—è—é—â–∏–π –Ω–æ—á–Ω—ã–µ –∫–æ—à–º–∞—Ä—ã –∏ –Ω–æ–≤—ã–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è.</p>
                    <p>–û–Ω–ª–∞–π–Ω: ${getRandomOnline()} –∏–≥—Ä–æ–∫–æ–≤</p>
                    <p>–û—Ç–∑—ã–≤—ã: ${getRandomRating()} (${getRandomReviews()} –æ—Ç–∑—ã–≤–æ–≤)</p>
                    <p>${getRandomFact()}</p>
                    <div class="download-container">
                        <button class="download-btn" onclick="downloadNightmareCraft()">–°–∫–∞—á–∞—Ç—å</button>
                    </div>
                `;
                resultsList.appendChild(nightmareLi);

                // –ü–æ–∏—Å–∫ –¥—Ä—É–≥–∏—Ö –º–æ–¥–æ–≤ —á–µ—Ä–µ–∑ Modrinth API
                try {
                    const response = await fetch(`https://api.modrinth.com/v2/search?query=${encodeURIComponent(query)}`);
                    const data = await response.json();
                    data.hits.forEach(mod => {
                        const li = document.createElement('li');
                        li.className = 'mod-item';
                        li.innerHTML = `
                            <h3>${mod.title}</h3>
                            <p>–û–ø–∏—Å–∞–Ω–∏–µ: ${mod.description}</p>
                            <p>–°–∫–∞—á–∏–≤–∞–Ω–∏–π: ${mod.downloads}</p>
                            <p>–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: ${mod.follows}</p>
                            <p>–û–Ω–ª–∞–π–Ω: ${getRandomOnline()} –∏–≥—Ä–æ–∫–æ–≤</p>
                            <p>–û—Ç–∑—ã–≤—ã: ${getRandomRating()} (${getRandomReviews()} –æ—Ç–∑—ã–≤–æ–≤)</p>
                            <p>${getRandomFact()}</p>
                            <a href="${mod.project_url}" target="_blank">–°–∫–∞—á–∞—Ç—å</a>
                        `;
                        resultsList.appendChild(li);
                    });
                } catch (error) {
                    resultsList.innerHTML += '<li>‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –º–æ–¥–æ–≤.</li>';
                }
            } else if (game === 'roblox') {
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –¥–ª—è Roblox
                const mockExtensions = [
                    { name: 'Roact', desc: '–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è UI –≤ Roblox', url: 'https://roact.roblox.com' },
                    { name: 'Rodux', desc: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–ª—è Roblox', url: 'https://rodux.roblox.com' }
                ];
                mockExtensions.forEach(ext => {
                    if (ext.name.toLowerCase().includes(query) || query === '') {
                        const li = document.createElement('li');
                        li.className = 'mod-item';
                        li.innerHTML = `
                            <h3>${ext.name}</h3>
                            <p>–û–ø–∏—Å–∞–Ω–∏–µ: ${ext.desc}</p>
                            <p>–û–Ω–ª–∞–π–Ω: ${getRandomOnline()} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                            <p>–û—Ç–∑—ã–≤—ã: ${getRandomRating()} (${getRandomReviews()} –æ—Ç–∑—ã–≤–æ–≤)</p>
                            <p>${getRandomFact()}</p>
                            <a href="${ext.url}" target="_blank">–°–∫–∞—á–∞—Ç—å</a>
                        `;
                        resultsList.appendChild(li);
                    }
                });
                if (resultsList.innerHTML === '') {
                    resultsList.innerHTML = '<li>‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π.</li>';
                }
            } else {
                resultsList.innerHTML = '<li>üîç –ü–æ–∏—Å–∫ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∏–≥—Ä –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.</li>';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è NightmareCraft —á–µ—Ä–µ–∑ –±–æ—Ç
        function downloadNightmareCraft() {
            if (!tg) {
                alert('–û—à–∏–±–∫–∞: Telegram Web App API –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω.');
                return;
            }
            alert('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ NightmareCraft...');
            tg.sendData('download_nightmarecraft');
        }
    </script>
</body>
</html>
